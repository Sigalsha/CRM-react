(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,a){e.exports=a(336)},112:function(e,t,a){},136:function(e,t,a){},138:function(e,t,a){},156:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},164:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){},167:function(e,t,a){},168:function(e,t,a){},169:function(e,t,a){},170:function(e,t,a){},171:function(e,t,a){},172:function(e,t,a){},173:function(e,t,a){},174:function(e,t,a){},30:function(e,t,a){},331:function(e,t,a){},332:function(e,t,a){},333:function(e,t,a){},334:function(e,t,a){},336:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(62),i=a.n(l),c=(a(112),a(5)),o=a(6),s=a(8),u=a(7),m=a(9),p=a(339),d=a(338),h=a(26),g=a.n(h),f="http://localhost:8100/clients/",y="Home",E="Clients",C="Actions",v="Analytics",b={name:"name",surname:"name",country:"country",firstContact:"firstContact",emailType:"emailType",sold:"sold",owner:"owner"},w=["A","B","C","D","No Type"],S=["Sold","Not sold"],N={main:{update:"update",addClient:"add client"},update:{client:"Client:",transferOwnership:"Transfer ownership to:",sendEmail:"Send email:",declareSale:"Declare sale!"},add:{firstName:"First Name:",surname:"Surname:",country:"Country:",owner:"Owner:",emailType:"Email Type:"}},O={transfer:"transfer",send:"send",declare:"declare"},T={addNew:"Add New Client"},j={update:{currentClient:"You must choose a client!",owner:"You must choose an owner!",emailType:"You must choose an email type!",declareSale:"Sale was already declared!"},addClient:{firstName:"You must add the client's first name",surname:"You must add the client's surname",country:"You must add the client's country",owner:"You must add the client's owner"}},k=["January","February","March","April","May","June","July","August","September","October","November","December"],x={country:"Country",emailType:"EmailType",year:"Year",owner:"Owner"},P={brown:"#795548",yellow:"#f7ce3e",orange:"#ff884b",lightgray:"lightgray",backgroundGray:"#f5f5f5",cyan:"#00bfff"},B=a(337),I=a(340),A=(a(136),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).isLinkActive=function(e,t){return"".concat(t===e?"nav-link nav-link-active":"nav-link")},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.location.pathname;return r.a.createElement("div",{id:"navbar-container"},r.a.createElement(B.a,{to:"/",className:this.isLinkActive("/",e)},y),r.a.createElement(B.a,{to:"/clients",className:this.isLinkActive("/clients",e)},E),r.a.createElement(B.a,{to:"/actions",className:this.isLinkActive("/actions",e)},C),r.a.createElement(B.a,{to:"/analytics",className:this.isLinkActive("/analytics",e)},v))}}]),t}(n.Component)),D=Object(I.a)(A),L=(a(138),function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"landing-container"},r.a.createElement("div",{className:"landing-header"},r.a.createElement("span",null,"CRM - manage your success")),r.a.createElement("div",{className:"landing-links-wrapper"},r.a.createElement(F,{path:"/clients",text:E}),r.a.createElement(F,{path:"/actions",text:C}),r.a.createElement(F,{path:"/analytics",text:v})))}}]),t}(n.Component)),F=function(e){var t=e.path,a=e.text;return r.a.createElement(B.a,{to:t,className:"link-square"},r.a.createElement("span",{className:"single-link"},a))},M=L,K=a(29),Y=a(24),R=a(23),_=a.n(R),q=(a(156),a(157),function(){return r.a.createElement("thead",null,r.a.createElement("tr",{id:"columns-header-container"},Object.keys(b).map(function(e,t){return r.a.createElement("th",{className:"column-header",key:t},function(e){switch(e){case"firstContact":return"First Contact";case"emailType":return"Email Type";default:return e}}(e))})))}),V=a(19),z=new function e(){var t=this;Object(c.a)(this,e),this.getClientProperty=function(e,t){return t.map(function(t){return t[e]})},this.reduceDuplications=function(e){return e.filter(function(e,t,a){return a.indexOf(e)===t})},this.findClientIndex=function(e,t){for(var a in e)if(e[a].client===t)return a},this.findClientIndexById=function(e,t){for(var a in e)if(e[a]._id===t)return a;return!1},this.isFrom2018=function(e,t){var a=e.slice(0,4);return t?a<2018:a>=2018},this.filterSalesByYear=function(e,t){return e.slice(0,4)===t},this.getSales=function(e,t){return e.filter(function(e){return e.sold===t})},this.getSalesByProperty=function(e,a){return t.getClientProperty(e,z.getSales(a,!0))},this.countSalesByKey=function(e){return e.reduce(function(e,t){return e[t]=(e[t]||0)+1,e},{})},this.getTopSalesByKey=function(e){var a=t.countSalesByKey(e);console.log("salesCounts: ",a);var n=Math.max.apply(Math,Object(Y.a)(Object.values(a))),r=Object.keys(a).filter(function(e){return a[e]===n});return console.log("mostFrequent: ",r),r},this.getSalesByMonth=function(e,t){return e.map(function(e){return new Date(e.firstContact)}).filter(function(e){return e.getMonth()===t}).length}},J=z,G=(a(158),a(159),function(e){var t=e.placeholder,a=e.onChange,n=e.name,l=e.optionList,i=e.value,c=e.defaultValue;return r.a.createElement("select",{className:"text-row",name:n,value:i,onChange:a,placeholder:t,optionlist:l},r.a.createElement("option",{defaultValue:c},c),l.map(function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))}),H=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.props.updateSelectedFilter(e),a.setState(Object(V.a)({},e.target.name,e.target.value))},a.state={owners:J.reduceDuplications(J.getClientProperty(b.owner,a.props.clients)),names:J.getClientProperty(b.name,a.props.clients),countries:J.reduceDuplications(J.getClientProperty(b.country,a.props.clients)),owner:"",sold:"",name:"",country:"",emailType:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=e.owners,a=e.names,n=e.countries,l=e.owner,i=e.emailType,c=e.name,o=e.country,s=e.sold;return r.a.createElement("div",{className:"clients-filter-wrapper"},r.a.createElement(U,{labelName:"Name",placeholder:"Name",optionList:a,value:c,onChange:this.handleChange,name:"name",isFilterSelect:!0}),r.a.createElement(U,{labelName:"Country",placeholder:"Country",optionList:n,value:o,onChange:this.handleChange,name:"country"}),r.a.createElement(U,{labelName:"Email Type",placeholder:"Email Type",optionList:w,onChange:this.handleChange,value:i,name:"emailType"}),r.a.createElement(U,{labelName:"Sold",placeholder:"Sold",optionList:S,onChange:this.handleChange,value:s,name:"sold"}),r.a.createElement(U,{labelName:"Owner",placeholder:"Owner",optionList:t,value:l,name:"owner",onChange:this.handleChange}))}}]),t}(n.Component),U=function(e){var t=e.labelName,a=e.optionList,n=e.placeholder,l=e.onChange,i=e.value,c=e.name;return r.a.createElement("div",{className:"filter-group"},r.a.createElement("label",null,t,": "),r.a.createElement(G,{optionList:a,placeholder:n,onChange:l,value:i,name:c,defaultValue:"All"}))},W=H,Q=a(16),X=a(14),Z=(a(164),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).previousDisplay=function(e){a.props.updateDisplayByPage(-1,e),a.setState({currentPage:e})},a.nextDisplay=function(e){a.props.updateDisplayByPage(1,e),a.setState({currentPage:e})},a.handleSinglePageClick=function(e){var t=a.state.currentPage;t>e?a.previousDisplay(e):t<e&&a.nextDisplay(e)},a.state={currentPage:1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.isPageReset&&this.props.isPageReset!==e.isPageReset&&this.setState({currentPage:1})}},{key:"render",value:function(){var e=this,t=this.state.currentPage,a=this.props.pageCount,n=t;return r.a.createElement("div",{className:"clients-pagination-wrapper"},r.a.createElement("span",{className:"page-arrow\n            ".concat(1===t?"page-cursor-not-allowed":"page-cursor","\n          "),onClick:function(){return e.previousDisplay(n>1?n-1:n)}},r.a.createElement(Q.a,{icon:X.a,style:{marginRight:5}}),"previous"),r.a.createElement($,{pageCount:this.props.pageCount,pageLimit:this.props.pageLimit,handleSinglePageClick:this.handleSinglePageClick}),r.a.createElement("span",{onClick:function(){return e.nextDisplay(n<a?n+1:n)},className:"page-arrow\n            ".concat(t===a?"page-cursor-not-allowed":"page-cursor","\n          ")},"next",r.a.createElement(Q.a,{icon:X.b,style:{marginLeft:5}})))}}]),t}(n.Component)),$=function(e){for(var t=e.pageCount,a=e.handleSinglePageClick,n=e.pageLimit,l=[],i=1;i<=Math.ceil(t);i++)l.push(i);function c(e){a(Number(e.target.id))}return r.a.createElement("ul",{className:"page-numbers"},l.map(function(e){return r.a.createElement("li",{key:e,id:e,className:"page-number\n              ".concat(Math.ceil(n/20)===e?"current-page-number":"not-current-page","\n              ").concat(e>Math.ceil(n/20)+10||e<Math.ceil(n/20)-10?"page-not-in-range":"","\n            "),onClick:c},e)}))},ee=Z,te=(a(165),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).generateClientToEdit=function(){var e=a.props,t=e.id,n=e.name,r=e.country,l=e.owner,i=e.emailType,c=e.sold;(0,e.toggleEditClient)({id:t,name:n,country:r,owner:l,emailType:i,sold:c})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.emailType,n=e.sold,l=e.owner,i=e.id,c=e.country,o=e.firstContact,s=t.split(" ")[0],u=t.split(" ")[1],m=o.split("T")[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{className:"row-container",id:i,onClick:this.generateClientToEdit},r.a.createElement("td",{className:"rowItem"},s),r.a.createElement("td",{className:"rowItem"},u),r.a.createElement("td",{className:"rowItem"},c),r.a.createElement("td",{className:"rowItem"},m),r.a.createElement("td",{className:"rowItem"},a),r.a.createElement("td",{className:"rowItem"},n?r.a.createElement("span",null,r.a.createElement("strong",null,"V")):"-"),r.a.createElement("td",{className:"rowItem"},l)))}}]),t}(n.Component)),ae=function(e){var t=e.clients,a=e.toggleEditClient;return r.a.createElement("tbody",null,t&&t.map(function(e){return r.a.createElement(te,{id:e._id,key:e._id,name:e.name,country:e.country,firstContact:e.firstContact,emailType:e.emailType,sold:e.sold,owner:e.owner,toggleEditClient:a})}))},ne=(a(166),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={firstName:a.props.clientToEdit.name.split(" ")[0],surname:a.props.clientToEdit.name.split(" ")[1],country:a.props.clientToEdit.country},a.handleInputChange=function(e){var t=e.target,n=t.value,r=t.name;a.setState(Object(V.a)({},r,n))},a.handleClosePopup=function(){a.props.toggleEditClient()},a.handleSubmit=function(){var e=a.props,t=e.submitInputChange,n=e.clientToEdit,r=a.state,l=r.firstName,i=r.surname,c=r.country,o={name:l&&i?"".concat(l," ").concat(i):n.name,country:c||n.country};t(Object(K.a)({},n,o))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=e.firstName,a=e.surname,n=e.country,l=this.props,i=l.toggleEditClient,c=l.clientToEdit;return r.a.createElement("div",{className:"popup-wrapper"},r.a.createElement("div",{className:"popup-container",id:c.id},r.a.createElement("div",{className:"exit-btn",onClick:i},r.a.createElement(Q.a,{icon:X.g})),r.a.createElement("div",{className:"popup-row"},r.a.createElement("span",null,"Name:"),r.a.createElement("input",{className:"popup-input",type:"text",name:"firstName",value:t,onChange:this.handleInputChange})),r.a.createElement("div",{className:"popup-row"},r.a.createElement("span",null,"surname:"),r.a.createElement("input",{className:"popup-input",type:"text",name:"surname",value:a,onChange:this.handleInputChange})),r.a.createElement("div",{className:"popup-row"},r.a.createElement("span",null,"Country"),r.a.createElement("input",{className:"popup-input",type:"text",name:"country",value:n,onChange:this.handleInputChange})),r.a.createElement("div",{className:"update-btn",onClick:this.handleSubmit},"Update")))}}]),t}(n.Component)),re=20,le=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).submitInputChange=function(t){var a=e.state,n=a.clientToEdit,r=a.showPopup;_.a.put("".concat(f).concat(n.id),t).then(function(e){console.log("res from update client (put) backend ",e)}).catch(function(e){return console.log("err from update client (put) backend ",e)}),e.setState({showPopup:!r,clientToEdit:{id:null,name:"",country:"",owner:"",sold:!1,emailType:null}},e.getClientsFromServer)},e.toggleEditClient=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=e.state.showPopup;e.setState({showPopup:!a,clientToEdit:t&&{id:t.id?t.id:"",name:t.name?t.name:"",country:t.country?t.country:"",owner:t.owner?t.owner:"",emailType:t.emailType?t.emailType:null,sold:!!t.sold&&t.sold}})},e.updateDisplayByPage=function(t,a){var n=e.state,r=(n.pageLimit,n.clientsToDisplay),l=n.pageCount,i=[],c=a*re;-1===t?1===a?i=r.slice(0,re):i=e.updateCurrentPageDisplay(r,re,c):(a>=l?l*re:re,i=e.updateCurrentPageDisplay(r,re,c)),e.setState({currentClients:i,pageLimit:c,isPageReset:!1})},e.updateCurrentPageDisplay=function(e,t,a){return e.slice(a-t,a)},e.updateClientsDisplay=function(){var t=e.state,a=t.clients,n=t.currentFilters,r=[];if(0===Object.entries(n).length)return e.setState({clientsToDisplay:Object(Y.a)(a),pageCount:e.updatePageCount(Object(Y.a)(a)),currentClients:Object(Y.a)(a).slice(0,re)});r=e.filterByProperty(),e.setState({clientsToDisplay:r,pageCount:e.updatePageCount(r),currentClients:r.slice(0,re),isPageReset:!0,pageLimit:20})},e.updateSelectedFilter=function(t){var a=e.state.currentFilters,n=t.target,r=n.value,l=n.name,i={};l&&r&&(i[l]="All"===r?"":"sold"===l?"Sold"===r:"emailType"===l&&"No Type"===r?null:r),e.setState({currentFilters:Object(K.a)({},a,i)},e.updateClientsDisplay)},e.filterByProperty=function(){var t=e.state,a=t.clients,n=t.currentFilters,r=Object(Y.a)(a),l=function(e){""!==n[e]&&(r=r.filter(function(t){return t[e]===n[e]}))};for(var i in n)l(i);return r},e.updatePageCount=function(e){return Math.ceil(e.length/re)<=1?1:Math.ceil(e.length/re)},e.state={loading:!0,showPopup:!1,clientToEdit:{},clients:[],pageCount:0,pageLimit:20,selectValue:"",clientsToDisplay:[],currentClients:[],currentFilters:{}},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getClientsFromServer()}},{key:"getClientsFromServer",value:function(){var e=this;_.a.get(f).then(function(t){if(console.log("res from clients backend: ",t.data.data),t.data.data.length){var a=t.data.data;e.setState({loading:!1,clients:a},e.updateClientsDisplay)}}).catch(function(e){console.log("err from clients backend: ",e)})}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.clients,n=e.pageLimit,l=e.selectValue,i=e.pageCount,c=e.currentClients,o=e.isPageReset,s=e.showPopup,u=e.clientToEdit;return console.log("clientToEdit",u),t?r.a.createElement("div",{id:"loader-position"},r.a.createElement(g.a,{type:"Puff",color:P.yellow,height:200,width:200})):r.a.createElement("div",{id:"clients-container"},r.a.createElement("div",{className:"clients-child"},r.a.createElement(W,{clients:a,selectValue:l,updateSelectedFilter:this.updateSelectedFilter})),r.a.createElement("div",{className:"clients-child"},r.a.createElement(ee,{updateDisplayByPage:this.updateDisplayByPage,pageLimit:n,pageCount:i,isPageReset:o,clients:c})),r.a.createElement("div",{className:"clients-child"},r.a.createElement("table",null,r.a.createElement(q,null),r.a.createElement(ae,{submitInputChange:this.submitInputChange,clients:c,toggleEditClient:this.toggleEditClient})),s&&r.a.createElement(ne,{clientToEdit:u,toggleEditClient:this.toggleEditClient,submitInputChange:this.submitInputChange})))}}]),t}(n.Component),ie=(a(167),a(168),function(e){var t=e.isClient;return r.a.createElement(Q.a,{icon:X.c,className:"main ".concat(t?"client-input":"")})}),ce=(a(169),function(e){var t=e.text;return r.a.createElement("div",{className:"update-header"},t)}),oe=(a(170),function(e){var t=e.list,a=e.placeholder,n=e.name,l=e.onChange,i=e.id,c=e.mapList,o=e.isAddClient;return r.a.createElement("div",{className:o?"datalist-add-client":"datalist-wrapper"},r.a.createElement("input",{className:"input-text ".concat(o?"input-text-add-client":""),type:"text",list:t,placeholder:a,name:n,onChange:l}),r.a.createElement("datalist",{id:i},c.map(function(e,t){return r.a.createElement("option",{value:e&&e.name?e.name:e,key:e&&e._id?e._id:t})})))}),se=(a(171),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target.value;t!==a.state.currentClient&&(a.setState({currentClient:t}),a.props.getCurrentClient(e))},a.state={clients:a.props.clients,currentClient:a.props.currentClient||""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=e.clients,a=e.currentClient;return console.log("current client from client input",a),console.log("clients from client input",t),r.a.createElement("div",{className:"client-input-container"},r.a.createElement("div",{className:"client-input-header"},r.a.createElement(ie,{isClient:"true"}),r.a.createElement(ce,{text:N.update.client})),r.a.createElement(oe,{list:t,placeholder:"Client Name",onChange:this.handleChange,id:t,mapList:t,name:"clientName"}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.clients!==t.clients?{clients:e.clients}:null}}]),t}(n.Component)),ue=(a(172),function(e){var t=e.text,a=e.toggleAlert;return r.a.createElement("div",{className:"alert-container"},r.a.createElement("div",{className:"alert-wrapper"},r.a.createElement("button",{className:"close-btn",onClick:a},r.a.createElement(Q.a,{icon:X.g})),r.a.createElement("p",{className:"alert-text"},r.a.createElement(Q.a,{icon:X.e}),r.a.createElement("span",null,t))))}),me=(a(173),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target,n=t.value,r=t.name;a.setState(Object(V.a)({},r,n))},a.resetInputes=function(){Array.from(document.querySelectorAll("input")).forEach(function(e){return e.value=""})},a.changeOwner=function(){var e=a.state.owner,t=a.props,n=t.currentClient,r=t.updateClient;if(n)return e?void r({id:n._id,owner:e},a.resetInputes()):(a.setState({alertText:j.update.owner,alert:!0}),void console.log("current client",a.props.currentClient));a.setState({alertText:j.update.currentClient,alert:!0,owner:""},a.resetInputes())},a.changeEmailType=function(){var e=a.state.emailType,t=a.props,n=t.currentClient,r=t.updateClient;n?e?r({id:n._id,emailType:e},a.resetInputes()):a.setState({alertText:j.update.emailType,alert:!0}):a.setState({alertText:j.update.currentClient,alert:!0},a.resetInputes())},a.declareSold=function(){var e=a.props,t=e.currentClient,n=e.updateClient;t&&t.sold?a.setState({alertText:j.update.declareSale,alert:!0},a.resetInputes()):t?n({id:t._id,sold:!0},a.resetInputes()):a.setState({alertText:j.update.currentClient,alert:!0},a.resetInputes())},a.toggleAlert=function(){a.setState({alert:!alert})},a.state={owners:a.props.owners,emailTypes:a.props.emailTypes,owner:"",emailType:"",alert:!1,alertText:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=e.owners,a=e.emailTypes,n=e.alert,l=e.alertText;return r.a.createElement("div",{className:"update-client-container"},n&&r.a.createElement(ue,{text:l,toggleAlert:this.toggleAlert}),r.a.createElement(ce,{text:N.update.transferOwnership}),r.a.createElement(oe,{list:t,placeholder:"Owner",id:t,mapList:t,name:"owner",onChange:this.handleInputChange,onFocuse:this.onFocus}),r.a.createElement(pe,{onClick:this.changeOwner,text:O.transfer}),r.a.createElement(ce,{text:N.update.sendEmail}),r.a.createElement(oe,{list:a,placeholder:"Email Type",id:a,mapList:a,name:"emailType",onChange:this.handleInputChange}),r.a.createElement(pe,{onClick:this.changeEmailType,text:O.send}),r.a.createElement(ce,{text:N.update.declareSale}),r.a.createElement("div",{className:"empty-div"}),r.a.createElement(pe,{onClick:this.declareSold,text:O.declare}))}}]),t}(n.Component)),pe=function(e){var t=e.onClick,a=e.text;return r.a.createElement("div",{className:"light-btn",onClick:t},a)},de=me,he=(a(174),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=function(e){var t=e.target,n=t.value,r=t.name;a.setState(Object(V.a)({},r,n))},a.checkNewClientDetails=function(e){for(var t in e)if(""===e[t])return!1},a.validateAction=function(e,t){return!!e||(a.setState({alertText:j.addClient[t],alert:!0}),!1)},a.toggleAlert=function(){a.setState({alert:!alert})},a.resetInputes=function(){Array.from(document.querySelectorAll("input")).forEach(function(e){return e.value=""})},a.handleAddClient=function(){var e=a.state,t=e.firstName,n=e.surname,r=e.country,l=e.owner;if(a.validateAction(t,"firstName")&&a.validateAction(n,"surname")&&a.validateAction(r,"country")&&a.validateAction(l,"owner")){var i={name:"".concat(t," ").concat(n),country:r,owner:l};!1===a.checkNewClientDetails(i)&&alert("please add all the client's details!"),a.props.addNewClient(i),a.setState({firstName:"",surname:"",country:"",owner:""},a.resetInputes)}},a.state={firstName:"",surname:"",country:"",owner:"",owners:a.props.owners,alert:!1,alertText:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=e.firstName,a=e.surname,n=e.country,l=e.alert,i=e.alertText,c=e.owners;return r.a.createElement("div",{className:"add-client-container"},l&&r.a.createElement(ue,{text:i,toggleAlert:this.toggleAlert}),r.a.createElement(ge,{inputType:t,inputTypeString:"firstName",handleInputChange:this.handleInputChange}),r.a.createElement(ge,{inputType:a,inputTypeString:"surname",handleInputChange:this.handleInputChange}),r.a.createElement(ge,{inputType:n,inputTypeString:"country",handleInputChange:this.handleInputChange}),r.a.createElement(ge,{inputTypeString:"owner",mapList:c,id:c,list:c,handleInputChange:this.handleInputChange}),r.a.createElement(ye,{onClick:this.handleAddClient,text:T.addNew}))}}]),t}(n.Component)),ge=function(e){var t=e.inputType,a=e.inputTypeString,n=e.handleInputChange,l=e.mapList,i=e.list,c=e.id;return r.a.createElement("div",{className:"input-wrapper"},r.a.createElement(ie,null),r.a.createElement(ce,{text:N.add[a]}),"owner"!==a?r.a.createElement(fe,{name:a,value:t,onChange:n}):r.a.createElement(oe,{isAddClient:"true",list:i,id:c,mapList:l,name:a,onChange:n}))},fe=function(e){var t=e.name,a=e.value,n=e.onChange;return r.a.createElement("input",{className:"input-add-client",type:"text",name:t,value:a||"",onChange:n})},ye=function(e){var t=e.onClick,a=e.text;return r.a.createElement("div",{className:"add-new-client-btn",onClick:t},a)},Ee=he,Ce=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).getCurrentClient=function(t){var a=e.state,n=a.clients,r=a.currentClient,l=t.target.value,i=n.filter(function(e){return l===e.name});i.length&&i[0]!==r?e.setState({currentClient:i[0]}):""===l&&e.setState({currentClient:l})},e.updateClient=function(t){var a=e.state.currentClient,n={emailType:t.emailType?t.emailType:a.emailType,sold:t.sold?t.sold:a.sold,owner:t.owner?t.owner:a.owner};_.a.put("".concat(f).concat(a._id),Object(K.a)({},a,n)).then(function(e){console.log("res from update client (put) backend ",e)}).catch(function(e){return console.log("err from update client (put) backend ",e)}),e.setState({currentClient:""},e.getClientsFromServer)},e.addNewClient=function(t){var a=e.state.clients;_.a.post("".concat(f,"add"),t).then(function(e){console.log("res from add new client (post) backend ",e)}).catch(function(e){console.log("err from add new client (post) backend ",e)}),e.setState({clients:[].concat(Object(Y.a)(a),[t])},e.getClientsFromServer)},e.state={loading:!0,emailType:["A","B","C","D"],owners:[],currentClient:""},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getClientsFromServer()}},{key:"getClientsFromServer",value:function(){var e=this;_.a.get(f).then(function(t){if(console.log("res from clients backend: ",t.data.data),t.data.data.length){var a=t.data.data;e.setState({loading:!1,clients:a,owners:J.reduceDuplications(J.getClientProperty(b.owner,a)),currentClient:""})}}).catch(function(e){console.log("err from clients backend: ",e)})}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.clients,n=e.owners,l=e.emailType,i=e.currentClient;return t?r.a.createElement("div",{id:"loader-position"},r.a.createElement(g.a,{type:"Puff",color:P.yellow,height:200,width:200})):r.a.createElement("div",{id:"actions-container"},r.a.createElement("div",{className:"actions-child"},r.a.createElement(ve,{text:N.main.update})),r.a.createElement("div",{className:"actions-child"},r.a.createElement(se,{clients:a,getCurrentClient:this.getCurrentClient})),r.a.createElement("div",{className:"actions-child"},r.a.createElement(de,{owners:n,emailTypes:l,updateClient:this.updateClient,currentClient:i})),r.a.createElement("div",{id:"section"}),r.a.createElement("div",{className:"actions-child"},r.a.createElement(ve,{text:N.main.addClient})),r.a.createElement("div",{className:"actions-child"},r.a.createElement(Ee,{addNewClient:this.addNewClient,owners:n})))}}]),t}(n.Component),ve=function(e){var t=e.text;return r.a.createElement("h1",{className:"actions-header"},t)},be=Ce,we=a(40),Se=(a(30),a(4)),Ne=function(e){var t=e.owners,a=e.getOwners;return r.a.createElement("div",{className:"chart-wrapper"},r.a.createElement("h5",{className:"chart-header"},"Top Employees"),r.a.createElement(Se.d,{width:400,height:300,data:a(t),margin:{top:20,bottom:5,right:5,left:5},fontSize:12},r.a.createElement(Se.e,{stroke:P.backgroundGray}),r.a.createElement(Se.p,{dataKey:"name"},r.a.createElement(Se.n,{width:12})),r.a.createElement(Se.q,null),r.a.createElement(Se.o,null),r.a.createElement(Se.h,null),r.a.createElement(Se.c,{dataKey:"sales",fill:P.yellow,barSize:20},r.a.createElement(Se.g,{dataKey:"name",position:"top",fontSize:12,marginBottom:15}))))},Oe=function(e){var t=e.sales;return r.a.createElement("div",{className:"chart-wrapper"},r.a.createElement("h5",{className:"chart-header"},"2018's Sales by Month"),r.a.createElement(Se.j,{width:400,height:300,data:function(){for(var e=[],a=0;a<12;a++)e.push({name:k[a],sales:J.getSalesByMonth(t,a)});return e}(),margin:{top:20,bottom:5,right:5,left:5},fontSize:12},r.a.createElement(Se.e,{strokeDasharray:"3 3"}),r.a.createElement(Se.p,{dataKey:"name"},r.a.createElement(Se.n,{width:12})),r.a.createElement(Se.q,null),r.a.createElement(Se.o,null),r.a.createElement(Se.h,null),r.a.createElement(Se.i,{type:"monotone",dataKey:"sales",stroke:P.orange,strokeWidth:2,dot:{fill:P.lightgray}})))},Te=(a(331),[P.brown,P.yellow,P.orange]),je=Math.PI/180,ke=function(e){var t=e.cx,a=e.cy,n=e.midAngle,l=e.innerRadius,i=e.outerRadius,c=e.percent,o=l+.5*(i-l),s=t+o*Math.cos(-n*je),u=a+o*Math.sin(-n*je);return r.a.createElement("text",{x:s,y:u,fill:"white",textAnchor:s>t?"start":"end",dominantBaseline:"central"},"".concat((100*c).toFixed(0),"%"))},xe=function(e){var t=e.sales,a=e.salesOf2018,n=e.years;function l(){for(var e=0,t=5;t<12;t++)e+=J.getSalesByMonth(a,t);return e}function i(e,t){return r.a.createElement(Se.m,{width:250,height:250},r.a.createElement(Se.l,{fontSize:13},r.a.createElement(Se.k,{data:e(),cx:"50%",cy:"50%",labelLine:!t,label:t||function(e){return"".concat(e.value)},outerRadius:80,dataKey:"value",legendType:"rect"},e().map(function(e,t){return r.a.createElement(Se.f,{key:t,fill:Te[t%Te.length]})})),r.a.createElement(Se.o,null)))}return r.a.createElement("div",{className:"pies-wrapper"},r.a.createElement("h5",{className:"chart-header"},"Client Acquisition"),r.a.createElement("div",{className:"pie-wrapper"},r.a.createElement("div",null,i(function(){for(var e=[],t=0,a=Object.entries(n);t<a.length;t++){var r=a[t],l=Object(we.a)(r,2),i=l[0],c=l[1];e.push({name:i,value:c})}return e},ke),r.a.createElement("p",{className:"pie-header"},"Sales by Year")),r.a.createElement("div",null,i(function(){return[{name:"last month of 2018",value:J.getSalesByMonth(a,11)},{name:"last 6 months of 2018",value:l()},{name:"before 2018",value:t.filter(function(e){return J.isFrom2018(e.firstContact,!0)}).length}]}),r.a.createElement("p",{className:"pie-header"},"Sales comparison"))))},Pe=(a(332),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleCategoryChange=function(e){var t=e.target.value;a.setState({category:t})},a.generateCategoryData=function(){var e=a.state.category,t=a.props,n=t.getSalesByCategory,r=t.countries,l=t.owners,i=t.emailTypes,c=t.years;switch(e){case"country":return n(r);case"owner":return n(l);case"emailType":return n(a._sortEmailTypes(i));case"year":return n(c);default:return n(r)}},a.generateAreaColor=function(){switch(a.state.category){case"country":return P.brown;case"owner":return P.yellow;case"emailType":return P.orange;case"year":default:return P.lightgray}},a._sortEmailTypes=function(e){return Object.keys(e).sort().reduce(function(t,a){return t[a]=e[a],t},{})},a.state={category:"country"},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.category;return r.a.createElement("div",{className:"chart-wrapper"},r.a.createElement("div",{className:"category-header"},r.a.createElement("h5",{className:"chart-header"},"Sales by"),r.a.createElement("select",{className:"select-category",value:e,onChange:this.handleCategoryChange},Object.keys(x).map(function(e,t){return r.a.createElement("option",{value:e,key:t,name:e},x[e])}))),r.a.createElement(Se.b,{width:400,height:300,data:this.generateCategoryData(),margin:{top:20,bottom:5,right:5,left:5},fontSize:12},r.a.createElement(Se.e,{strokeDasharray:"3 3",strokeWidth:2,dot:{fill:P.lightgray}}),r.a.createElement(Se.p,{dataKey:"name"},r.a.createElement(Se.n,{width:12})),r.a.createElement(Se.q,null),r.a.createElement(Se.o,null),r.a.createElement(Se.a,{type:"monotone",dataKey:"sales",stroke:this.generateAreaColor(),fill:this.generateAreaColor(),fillOpacity:.8})))}}]),t}(n.Component)),Be=(a(333),function(e){var t=e.badges;return r.a.createElement("div",{className:"badges-wrapper"},t.map(function(e){return r.a.createElement("div",{className:"badge",key:e.id,name:e.name,icon:e.icon,header:e.header,description:e.description},r.a.createElement(Q.a,{icon:e.icon,className:"badge-icon"}),r.a.createElement("p",{className:"badge-header tooltip-hover"},e.header,r.a.createElement("span",{className:"badge-tooltip"},e.description)),r.a.createElement("p",{className:"badge-desc"},e.description),r.a.createElement("h2",{className:"badge-result"},e.result))}))}),Ie=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).getBadges=function(){var t=e.state.clients;return[{id:1,name:"longTimeClients",icon:X.i,header:"Long-time Clients",description:"Clients who joined before 2018",result:t.filter(function(e){return J.isFrom2018(e.firstContact,!0)}).length},{id:2,name:"emailsSent",icon:X.d,header:"Emails Sent",description:"Number of emails sent in total",result:t.filter(function(e){return null!==e.emailType}).length},{id:3,name:"targetClients",icon:X.h,header:"Target Clients",description:"Clients without acquisition",result:J.getSales(t,!1).length},{id:4,name:"hottestCountry",icon:X.f,header:"Hottest Country",description:"Country with highest sales",result:J.getTopSalesByKey(J.getSalesByProperty("country",t))}]},e.getSalesOf2018=function(){var t=e.state.clients;return J.getSales(t,!0).filter(function(e){return J.isFrom2018(e.firstContact,!1)})},e.getSalesByYear=function(){var t=e.state.clients;return J.getSales(t,!0).map(function(e){return e.firstContact.slice(0,4)})},e.state={loading:!0},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;_.a.get(f).then(function(t){if(console.log("res from clients backend: ",t.data.data),t.data.data.length){var a=t.data.data;e.setState({loading:!1,clients:a})}}).catch(function(e){console.log("err from clients backend: ",e)})}},{key:"getSalesByClientsCategory",value:function(e){for(var t=[],a=0,n=Object.entries(e);a<n.length;a++){var r=n[a],l=Object(we.a)(r,2),i=l[0],c=l[1];t.push({name:i,sales:c})}return t}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.clients;return t?r.a.createElement("div",{id:"loader-position"},r.a.createElement(g.a,{type:"Puff",color:P.yellow,height:200,width:200})):r.a.createElement("div",{id:"analytics-container"},r.a.createElement(Be,{badges:this.getBadges()}),r.a.createElement("div",{className:"charts-container"},r.a.createElement(Ne,{owners:J.countSalesByKey(J.getSalesByProperty("owner",a)),getOwners:this.getSalesByClientsCategory}),r.a.createElement(Oe,{sales:this.getSalesOf2018()}),r.a.createElement(Pe,{clients:a,owners:J.countSalesByKey(J.getSalesByProperty("owner",a)),getSalesByCategory:this.getSalesByClientsCategory,countries:J.countSalesByKey(J.getSalesByProperty("country",a)),emailTypes:J.countSalesByKey(J.getSalesByProperty("emailType",a)),years:J.countSalesByKey(this.getSalesByYear())}),r.a.createElement(xe,{sales:J.getSales(a,!0),salesOf2018:this.getSalesOf2018(),years:J.countSalesByKey(this.getSalesByYear()),getSalesByCategory:this.getSalesByClientsCategory})))}}]),t}(n.Component),Ae=(a(334),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).state={loading:!0},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){return e.setState({loading:!1})},1e3)}},{key:"render",value:function(){return this.state.loading?r.a.createElement("div",{id:"general-loader"},r.a.createElement(g.a,{type:"Puff",color:P.yellow,height:200,width:200})):r.a.createElement(p.a,null,r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"general"},r.a.createElement(D,null)),r.a.createElement("div",null,r.a.createElement(d.a,{path:"/",exact:!0,component:M}),r.a.createElement(d.a,{path:"/clients",exact:!0,component:le}),r.a.createElement(d.a,{path:"/actions",exact:!0,component:be}),r.a.createElement(d.a,{path:"/analytics",exact:!0,component:Ie}))))}}]),t}(n.Component));a(335);i.a.render(r.a.createElement(Ae,null),document.getElementById("root"))}},[[107,1,2]]]);
//# sourceMappingURL=main.99e02bf5.chunk.js.map